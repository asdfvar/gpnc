\documentclass{article}
\usepackage[in]{fullpage}
\usepackage{amsmath}
\usepackage{amsfonts}
%
\begin{document}
%
% paper title
\title {Homography}
%\author{Craig~Euler}
%
\maketitle
%
\section {The Homography}
%
Words words words then
%
\begin {equation} \label {eq:homography}
H = d R + t n^t
\end {equation}
%
\section {Decomposition of the Homography}
%
The derivation of this decomposition is based on the paper ``Motion and Structure from Motion in a piecewise planar environment'' by Olivier Faugeras and Francis Lustman.

Start by computing the components of the SVD of (\eqref {eq:homography}) to obtain $H = U \Lambda V^t$. It follows that $\Lambda$ is also a homography with components:
%
\begin {equation} \label {eq:homography_p}
\Lambda = d' R' + t' n'
\end {equation}
%
where
%
\begin {equation}
\begin {aligned}
R &= s U R' V^t \\
t &= U t' \\
n &= V n' \\
d &= s d' \\
s &= det (U) det (V)
\end {aligned}
\end {equation}
%
Using the canonical basis $(e_1, e_2, e_3)$, $n' = x_1 e_1 + x_2 e_2 + x_3 e_3$, (\eqref {eq:homography_p}) is written into its components:
%
\begin {equation} \label {eq:homography_components}
d_i e_i = d' R' e_i + t' x_i
\end {equation}
%
where $d_i$ is a component of the diagonal matrix $\Lambda$.
Multiply equation $i$ of (\eqref {eq:homography_components}) by $x_j$ and equation $j$ by $x_i$ and subtract to eliminate $t$ and obtain:
%
\begin {equation} \label {eq:eliminate_t}
d' R' (x_j e_i - x_i e_j) = d_i x_j e_i - d_j x_i e_j.
\end {equation}
%
Take the $L_2$ norm of (\eqref {eq:eliminate_t}):
%
\begin {equation}
||d' R' (x_j e_i - x_i e_j)||^2 = ||d_i x_j e_i - d_j x_i e_j||^2
\end {equation}
%
Since $R'$ is a rotation and hence preserves the vector norm, it can be eliminated
%
\begin {equation}
\begin {aligned}
||d' (x_j e_i - x_i e_j)||^2 &= ||d_i x_j e_i - d_j x_i e_j||^2 \\
d'^2 (x_j^2 + x_i^2) &= d_i^2 x_j^2 + d_j^2 x_i^2
\end {aligned}
\end {equation}
%
Re-ordering the terms produces the system of equations:
%
\begin {equation}
\label {eq:system_of_equations}
(d'^2 - d_j^2) x_i^2 + (d'^2 - d_i^2) x_j^2 = 0
\end {equation}
%
which means that the determinant must be zero:
%
\begin {equation}
(d'^2 - d_1^2) (d'^2 - d_2^2) (d'^2 - d_3^2) = 0.
\end {equation}
%
Because $d_1 > d_2 > d_3$ and (\eqref {eq:system_of_equations}), it follows that $d' = \pm d_2$.
%
Using the fact that $n'$ has a unit norm and (\eqref {eq:system_of_equations}), it follows that
%
\begin {equation}
\label {eq:normal}
\begin {aligned}
x_1 &= \epsilon_1 \sqrt {\frac {d_1^2 - d_2^2}{d_1^2 - d_3^2}} \\
x_2 &= 0 \\
x_3 &= \epsilon_3 \sqrt {\frac {d_2^2 - d_3^2}{d_1^2 - d_3^2}}
\end {aligned}
\end {equation}
%
where $\epsilon_1, \epsilon_3 = \pm 1$.

\noindent
\textbf {Case $d' > 0$:}

\noindent
because $x_2 = 0$ and $d' = d_2$, if follows from from \eqref {eq:homography_components} that $R' e_2 = e_2$ and so $R'$ is a rotation matrix about $e_2$:
%
\begin {equation}
\begin {pmatrix}
cos \theta & 0 & -sin \theta \\
0          & 1 &    0        \\
sin \theta & 0 &  cos \theta
\end {pmatrix}
\end {equation}
%
Using \eqref {eq:eliminate_t} and \eqref {eq:normal},
%
\begin {equation}
\begin {aligned}
sin \theta &= (d_1 - d_3) \frac {x_1 x_3} {d_2} \\
cos \theta &= \frac {d_1 x_3^2 + d_3 x_1^2} {d_2}
\end {aligned}
\end {equation}
%
substituting the appropriate values into \eqref {eq:homography_components} yeilds
%
\begin {equation}
t' = (d_1 - d_3)
\begin {pmatrix}
x_1 \\
0 \\
-x_3 \\
\end {pmatrix}
\end {equation}

\noindent
\textbf {case $d' < 0$:}

\noindent
Then $R' e_2 = -e_2$ and so $R'$ can be written as
%
\begin {equation}
\begin {pmatrix}
cos \phi &  0 &  sin \phi \\
0        & -1 &  0        \\
sin \phi &  0 & -cos \phi
\end {pmatrix}
\end {equation}
%
with
%
\begin {equation}
\begin {aligned}
sin \phi &= \frac {d_1 + d_3} {d_2} x_1 x_3 \\
cos \phi &= \frac {d_3 x_1^2 - d_1 x_3^2} {d_2}
\end {aligned}
\end {equation}
%
And, similar to the process before,
%
\begin {equation}
t' = (d_1 + d_3)
\begin {pmatrix}
x_1 \\
0 \\
x_3
\end {pmatrix}
\end {equation}
%
\end {document}
